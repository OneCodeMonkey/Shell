# 系统性能分析--读书笔记--《性能之巅：洞悉系统，企业和云计算》

## 1. 绪论

系统性能是对整个系统的研究，包括了所有的硬件组件和整个软件栈。所有数据路径上和软硬件上所发生的事情集合，因为这些都会影响性能。

### 1.1 通用系统软件栈

![å¨è¿éæå¥å¾çæè¿°](https://img-blog.csdnimg.cn/20181219205301572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p1b3pld2Vp,size_16,color_FFFFFF,t_70)

### 1.2 性能的事情列表

| 性能事件                                   |
| ------------------------------------------ |
| 设置性能目标和建立性能模型                 |
| 基于软件和硬件原型，归纳出性能特征         |
| 对开发代码进行性能分析（软件整合之前）     |
| 执行软件非回归性测试（软件发布前或发布后） |
| 针对软件发布版本的基准测试                 |
| 目标环境中的概念验证测试                   |
| 生产环境部署的配置优化                     |
| 监控生产环境中运行的软件                   |
| 特定问题的性能分析                         |

### 1.3 两种性能分析视觉：资源分析和负载分析

性能术语**“容量规划”（capacity planning）**指的是一系列事前行动。在设计阶段，包括通过研究开发软件的资源占用情况，来得知原有设计在多大程度上能满足目标需求。在部署后，包括监控资源的使用情况，这样问题在出现之前就能预测到。

![å¨è¿éæå¥å¾çæè¿°](https://img-blog.csdnimg.cn/20181219205613470.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p1b3pld2Vp,size_16,color_FFFFFF,t_70)

- 资源分析指标：IPOS，吞吐量，使用率，饱和度
- 工作负载指标：吞吐量和延时。

性能分析必须量化问题的重要与否程度，有一个指标很合适，叫做延时（latency）

动态跟踪技术把所有的软件变得可监控，而且能用于真实的生产环境中。这项技术利用内存中的 CPU 指令并在这些指令上动态构建检测数据。这样能从任何运行的软件中获取定制化的性能统计数据，从而提供远超系统自带统计所能给予的观测性。

DTrace 对用户态和内核态的软件都提供了静态跟踪和动态跟踪，并且数据是实时产生的。

### 1.4 受测系统

![å¨è¿éæå¥å¾çæè¿°](https://img-blog.csdnimg.cn/20181219204638349.jpg)

扰动（perturbation）是会影响结果的。扰动包括定时执行的系统活动，系统的其他用户以及其他的工作负载。现代环境的另一个困难是系统很可能由若干个网络化的组件组成，都用于处理输入工作负载，包括负载均衡，Web服务器，数据库服务器，应用程序服务器，以及存储系统。

### 1.5 排队系统

### 1.6 排队理论及使用率响应时间关系

### 1.7 方法

#### 1.7.1 通用的性能分析方法

## 2. 操作系统

## 3. 观测工具

### 3.1 计数器

### 3.2 跟踪

## 4. 应用程序

## 5. CPU分析

### 5.1 CPU分析工具

### 5.2 CPU调优

## 6. 内存分析

### 6.1 内存分析工具

### 6.2 内存调优

## 7. 文件系统分析

### 7.1 文件系统分析工具

### 7.2 文件系统调优

## 8. 磁盘分析

### 8.1 磁盘分析工具

### 8.2 磁盘性能调优

## 9. 网络

## 10. 云计算 & 基准测试

### 10.1 术语

#### 10.1.1 方法

#### 10.1.2 操作系统

### 10.2 USE 法 Linux 检查清单

#### 10.2.1 软件资源

## 11. 小结

